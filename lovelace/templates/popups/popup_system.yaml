---
card:
  type: vertical-stack
  cards:
    - type: custom:decluttering-card
      template: button_row3
      variables:
        - entity1: script.automation_reload
        - name1: ðŸ”„ Automa...
        - show_state1: false
        - entity2: script.script_reload
        - name2: ðŸ”„ Scripts
        - show_state2: false
        - entity3: script.config_check_and_restart
        - name3: ðŸ”ƒ HASS
        - show_state3: false
    - type: custom:decluttering-card
      template: button_row3
      variables:
        - entity1: script.config_check_and_reboot_server
        - name1: â†ª Server
        - show_state1: false
        - entity2: script.config_check
        - name2: âœ”ï¸ Config
        - show_state2: false
        - entity3: script.ci_prep
        - name3: ðŸ¥¼ CI Prep
        - show_state3: false

    # - type: custom:auto-entities
    #   show_empty: false
    #   filter:
    #     include:
    #       - entity_id: persistent_notification.1337
    #   card:
    #     type: markdown
    #     content: >
    #       ### {{ state_attr('persistent_notification.1337','title') }}

    #       {{ state_attr('persistent_notification.1337','message') }}

    - type: entities
      entities:
        - type: custom:multiple-entity-row
          entity: sensor.current_version
          name: VM
          icon: mdi:home-assistant
          hide_state: true
          primary:
            entity: sensor.processor_use
            name: CPU
          secondary:
            entity: sensor.memory_free
            name: RAM
          tertiary:
            entity: sensor.disk_use_percent
            name: Storage use

        - type: custom:multiple-entity-row
          entity: sensor.uptime
          name: Uptime
          hide_state: true
          info:
            entity: sensor.uptime
            name: ""
          primary:
            entity: sensor.last_boot
            name: Last Reboot
        - type: custom:multiple-entity-row
          entity: sensor.current_version
          name: Current Version
          hide_state: true
          info:
            entity: sensor.current_version
            name: ""
          primary:
            entity: sensor.latest_release
            name: Stable
          secondary:
            entity: sensor.latest_beta
            name: Beta

    - type: custom:auto-entities
      show_empty: false
      filter:
        include:
          - entity_id: binary_sensor.update_available
            state: "on"
          - entity_id: sensor.potential_breaking_changes
            state: "> 0"
      card:
        type: entities

    - type: custom:decluttering-card
      template: heading2
      variables:
        - heading: Unifi Gateway
    - type: entities
      entities:
        - type: custom:multiple-entity-row
          entity: sensor.unifi_gateway_lan
          name: LAN
          hide_state: true
          info:
            entity: sensor.unifi_gateway_lan
            name: ""
          primary:
            entity: sensor.unifi_gateway_wlan
            name: WLAN
          secondary:
            entity: sensor.unifi_gateway_wan
            name: WAN
          tertiary:
            entity: sensor.unifi_gateway_www
            name: WWW
        # - type: custom:multiple-entity-row
        #   entity: sensor.unifi_gateway_alerts
        #   name: Alerts
        #   icon: mdi:bell-alert
        #   hide_state: true
        #   info:
        #     entity: sensor.unifi_gateway_alerts
        #     name: ""
        #   secondary:
        #     entity: sensor.unifi_gateway_firmware_upgradable
        #     name: Firmware Upgrades

    - type: custom:auto-entities
      show_empty: false
      filter:
        include:
          - entity_id: sensor.unifi_gateway_alerts
            state: "> 0"
          - entity_id: sensor.unifi_gateway_firmware_upgradable
            state: "> 0"
      card:
        type: entities

    - type: custom:decluttering-card
      template: heading2
      variables:
        - heading: AdGuard
    - type: entities
      entities:
        - type: custom:multiple-entity-row
          entity: sensor.adguard_dns_queries_blocked_ratio
          name: Blocked
          icon: mdi:shield-check
          hide_state: true
          info:
            entity: sensor.adguard_dns_queries_blocked_ratio
            name: ""
          primary:
            entity: sensor.adguard_dns_queries
            name: Queries
          secondary:
            entity: sensor.adguard_average_processing_speed
            name: Avg Response
        - type: custom:multiple-entity-row
          entity: sensor.adguard_safe_searches_enforced
          name: Safe Searches
          icon: mdi:shield-check
          hide_state: true
          info:
            entity: sensor.adguard_safe_searches_enforced
            name: ""
          primary:
            entity: sensor.adguard_parental_control_blocked
            name: Parent Control
          secondary:
            entity: sensor.adguard_safe_browsing_blocked
            name: Safe Browsing

        - type: section
        - type: custom:multiple-entity-row
          entity: switch.adguard_filtering
          name: Protection
          icon: mdi:shield-check
          hide_state: true
          primary:
            entity: switch.adguard_protection
            name: Enabled
            toggle: true
          secondary:
            entity: switch.adguard_filtering
            name: Filtering
            toggle: true
          tertiary:
            entity: switch.adguard_safe_browsing
            name: Browsing
            toggle: true
        - type: custom:multiple-entity-row
          entity: switch.adguard_parental_control
          name: Parental Control
          icon: mdi:shield-check
          hide_state: true
          primary:
            entity: switch.adguard_parental_control
            name: Enabled
            toggle: true
          secondary:
            entity: switch.adguard_safe_search
            name: Safe Search
            toggle: true

    #     - sensor.adguard_dns_queries_blocked
    #     - sensor.adguard_rules_count
    #     - switch.adguard_query_log
