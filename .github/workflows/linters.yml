---
name: linters
# yamllint disable-line rule:truthy
on:
  - push
jobs:
  yamllint:
    runs-on: ubuntu-latest
    steps:
      - name: ⤵️ Check out configuration from GitHub
        uses: actions/checkout@v3
      - name: "🙈 Ignore SAK example files"
        run: rm -rf ./dashboards/sak_templates ; rm -rf ./dashboards/views/sak-example-views ; rm -rf ./dashboards/views/sak-tutorial-views ; rm -rf ./dashboards/decluttering_templates
      - name: 🚀 Run yamllint
        uses: frenck/action-yamllint@v1.2.0

  remarklint:
    #runs-on: ubuntu-18.04
    runs-on: ubuntu-latest
    steps:
      - name: ⤵️ Check out configuration from GitHub
        uses: actions/checkout@v3
      - name: "🙈 Ignore SAK example files"
        run: rm -rf ./dashboards/sak_templates ; rm -rf ./dashboards/views/sak-example-views ; rm -rf ./dashboards/views/sak-tutorial-views ; rm -rf ./dashboards/decluttering_templates
      - name: "🙈 Ignore 3rd party packages"
        run: rm -rf ./integrations/3rdparty_packages
      - name: 🙈 Ignore autogenerated files and folders
        run: rm -f ./automations.yaml ; rm -f ./customize.yaml ; rm -f ./scenes.yaml ; rm -f ./scripts.yaml ;  rm -f ./ui-love*.yaml ; rm -rf ./blueprints
      - name: 🚀 Run Remark lint
        uses: "docker://pipelinecomponents/remark-lint:latest"
        continue-on-error: true
        with:
          args: "remark --no-stdout --color --frail --use preset-lint-recommended ."
