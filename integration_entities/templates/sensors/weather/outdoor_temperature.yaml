---
unique_id: outdoor_temperature
name: Outdoor temperature
device_class: temperature
state_class: measurement
unit_of_measurement: "Â°F"
state: >
  {%- set value0 = states("sensor.backyard_fence_temperature")|float(default=0)   %}
  {%- set value1 = states("sensor.backyard_wall_temperature")|float(default=0) %}
  {%- set value2 = state_attr("weather.accuweather","temperature")|trim -%}
  {%- set value3 = state_attr("weather.openweathermap","temperature")|trim -%}
  {%- set value = value0 %}
  {%- if value0 is not number or value0 <= 0 %}
    {%- if value1 is number and value1 > 0 %}
      {%- set value = value1 %}
    {%- elif value2 is number and value2 > 0 %}
      {%- set value = value2 %}
    {%- elif value3 is number and value3 > 0 %}
      {%- set value = value3 %}
    {%- else %}
      {%- set value = 0 %}
    {%- endif %}
  {%- endif %}
  {{ value|round(default=0) }}
attributes:
  backyard_fence: |
    {{ states("sensor.backyard_fence_temperature")|float(default=0) }}
  backyard_wall: |
    {{ states("sensor.backyard_wall_temperature")|float(default=0) }}
  accuweather: |
    {{ state_attr("weather.accuweather","temperature")|trim }}
  openweather: |
    {{ state_attr("weather.openweathermap","temperature")|trim }}
