---
unique_id: contact_sensors_open
name: Contact sensors open
icon: mdi:door-open
state_class: total
state: |
  {{
    this.attributes.open_doors | count | default(0)
    + this.attributes.open_windows | count | default(0)
  }}
attributes:
  open_doors: |
    {%- set doors = state_attr("sensor.doors_open","open_doors") | sort() %}
    {%- set open_doors = states.binary_sensor | selectattr("entity_id","in",doors) | selectattr("state","eq","on") | map(attribute="entity_id") | list %}
    {{ open_doors }}
  open_windows: |
    {%- set windows = state_attr("sensor.windows_open","open_windows") | sort() %}
    {%- set open_windows = states.binary_sensor | selectattr("entity_id","in",windows) | selectattr("state","eq","on") | map(attribute="entity_id") | list %}
    {{ open_windows }}
