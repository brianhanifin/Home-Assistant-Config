---
unique_id: contact_sensors_open
name: Contact sensors open
icon: mdi:door-open
state_class: total
state: |
  {{
    this.attributes.open_doors|default([]) | count | default(0)
    + this.attributes.open_windows|default([]) | count | default(0)
  }}
attributes:
  open_doors: |
    {{
      states.binary_sensor
      | selectattr("entity_id","in",state_attr("sensor.doors_open","entities"))
      | selectattr("state","eq","on")
      | map(attribute="entity_id")
      | list
    }}
  open_windows: |
    {{
      states.binary_sensor
      | selectattr("entity_id","in",state_attr("sensor.windows_open","entities"))
      | selectattr("state","eq","on")
      | map(attribute="entity_id")
      | list
    }}
